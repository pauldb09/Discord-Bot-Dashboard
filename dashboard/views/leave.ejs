<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Green-bot -
        <%= guild.name %>
    </title>

    <meta property="og:description" content="Green-bot est un bot Discord français Multis fonctions.">
    <meta name="twitter:image" content="<%= bot.displayAvatarURL() %>">
    <meta name="twitter:image" content="<%= bot.displayAvatarURL() %>g">
    <meta name="author" content="Pauldb09">
    <meta name="description" content="Green-bot est un bot Discord français Multis fonctions.">
    <meta property="og:type" content="website">
    <meta property=og:image content="https://cdn.discordapp.com/avatars/783708073390112830/f4aabacb3667ba1831d3ca5f7b2e486d.webp?size=512">
    <meta name="theme-color" content="#3A871F">
    <meta property="og:site_name" content="Créez le meilleur serveur Discord">
    <meta property="og:title" content="Green-bot">
    <meta property="og:image" content="<%= bot.displayAvatarURL() %>">
    <link rel="shortcut icon" type="image/x-icon" href="<%= bot.displayAvatarURL() %>">
    <meta name="viewport" content="width=device-width,initial-scale=1">

    <link href="/css/cssdash.css" rel="stylesheet">
</head>
<%
const pp = UserAvatar;
%>

    <body style="background-color: #2f313e;">
        <div class="main">
            <div class="dashboard">
                <span class="guildlist">
                    <div class="bot-list">
                    <div id="783708073390112830" class="item">
                        <a href="/profile">
            <div class="bot-item tts:right" aria-label="  Profile">
                <img class="icon-bot" data-id="783708073390112830" src="<%= pp %>" width="70px" height="70px">
            </div>
        </a>
    </div>
                    <hr class="bot-hr">
              
                <% guilds.forEach((guild) => { %>
                    <% if (guild.icon) { %>
                        <div id="783708073390112830" class="item">
                            <a href="/server/<%= guild.id %>">
                <div class="bot-item tts:right" aria-label="  <%= guild.name %>">
                    <img class="icon-bot" data-id="783708073390112830" src="https://cdn.discordapp.com/icons/<%= guild.id %>/<%= guild.icon %>.png?size=2048" width="70px" height="70px">
                </div>
            </a>
        </div>
                        <% } else { %>

                            <div id="783708073390112830" class="item">
                                <a href="/server/<%= guild.id %>">
                    <div class="bot-item tts:right" aria-label="  <%= guild.name %>">
                        <canvas class="icon-bot" id="<%= guild.name.replace(/\w+/g, name => name[0]).replace(/\s/g, '') %>" width="70px" height="70px"></canvas>
                        <script>
                          function createIcone() {
                            const nameAcronym = document.getElementById("<%= guild.name.replace(/\w+/g, name => name[0]).replace(/\s/g, '')  %>").getContext('2d');
                            nameAcronym.font = '30px Arial';
                            nameAcronym.textAlign = "center";
                            nameAcronym.fillStyle = "white";
                            nameAcronym.fillText("<%= guild.name.replace(/\w+/g, name => name[0]).replace(/\s/g, '')  %>", 35, 45);
                          };
                          createIcone();
                        </script>
                    </div>
                </a>
            </div>

                           
                            <%}%>

                                <%});%>
                
  

                                <div class="item-leave">
                                    <div style="width: max-content;margin-left: auto;margin-right: auto;">
                                        <a href="/">
                                           </a></div></div></div></span>
                <style>
                    .leftmenu {
                        background-color: #2f3136 !important;
                    }
                </style>
                <span class="leftmenu">
                    <div class="menu">
                        <div class="nav-guild">
                        <div class="forms-guild">
                            <% if (guild.icon) { %>
                                <img src="https://cdn.discordapp.com/icons/<%=guild.id%>/<%=guild.icon%>.png?size=128"    >
                            <% } else { %>
                                     <img src="https://cdn.discordapp.com/attachments/748897191879245834/782271474450825226/0.png?size=128"  >
                
                                <% } %>
                          <h4><%= guild.name %><br><br><%= guild.memberCount %> members</h4>
                        </div>
                      </div>
                <div class="menu-btn">
                    <a href="/server/<%=guild.id%>">
                        <div class="btn-item ">
                           <span class="item-span">General</span></div>
            </a>
            <a href="/server/<%=guild.id%>/welcome">
                <div class="btn-item ">
                    <span class="item-span">Welcome message</span></div>
            </a>
            <a href="/server/<%=guild.id%>/leave">
                <div class="btn-item btn-item-active">
                    <span class="item-span">Leave messages</span></div>
            </a>
            <a href="/server/<%=guild.id%>/channels">
                <div class="btn-item">
                    <span class="item-span">Specifics channels</span></div>
            </a>





            <a href="/server/<%=guild.id%>/autorole">
                <div class="btn-item">
                    <span class="item-span">Autorole</span></div>
            </a>

            <a href="/server/<%=guild.id%>/embed">
                <div class="btn-item  ">
                    <span class="item-span">Embed sender </span></div>
            </a>
            <a href="/server/<%=guild.id%>/moderation">
                <div class="btn-item  ">
                    <span class="item-span">Boost messages </span></div>
            </a>


            <a href="/server/<%=guild.id%>/ping">
                <div class="btn-item  ">
                    <span class="item-span">Auto ping </span>
                </div>
            </a>

        </div>
        </div>
        </span>
        <span class="rightmenu">

    <div class="page-content">

        <%
        let leavec;

        if (leave) {
            if (leave.channelID) {
                leavec = guild.channels.find((r)=> r.id === leave.channelID);
            } else {
                leavec = null;
            }

        } else {
            leavec = null;
        } 
        let leavemsg;
        let leavechannel;
        let leavestatus;
        let color
        if (leave) {
            leavemsg = leave.message;
           
            leavestatus = leave.status;
            leaveimage = leave.image;
            if(leave.color){
                color = leave.color
            }else{
                color = "#A27D4E"
            }
        } else {
            leavemsg = "Goodbye {user} on {server} ! We are now {membercount} without you :/";
            leaveimage = null;
            leavestatus = null;
            color = "#A27D4E"

        } %>
        <form role="form" id="formgen" action="/server/<%= guild.id %>/leave" method="POST">
            <br>
            <br>
              <div>
                  <div class="_3mcH5">
                      <div class="_1g4U_">
                          <div class="YOVBk">
                              <font style="vertical-align: inherit;">
                                  <font style="color:#D2D3CA;vertical-align: inherit;">
                                      Goodbye message
                                  </font>
                              </font>
                          </div>
                          <div>
                              <div class="_2hHzh">
  
                              </div>
                          </div>
                      </div>
                      <div class="_3_S5z">
                          <font style="vertical-align: inherit;">
                              <font style="vertical-align: inherit;color: #72767d;font-size:.825rem;line-height:20px;">Say goobye to members who leave your server! </font>
                          </font>
                          <% if(leavestatus){  %>
                              <label data-v-6d7a27c0="" for="leave_status" class="switch">
                                      <input data-v-6d7a27c0="" name="leave_status" id="leave_status" type="checkbox" checked> 
                                      <div data-v-6d7a27c0="" class="slider round" style="height: 30px !important;">
                                      </div>
                                  </label>
                              <% }else{%>
                                  <label data-v-6d7a27c0="" for="leave_status" class="switch">
                                          <input data-v-6d7a27c0="" name="leave_status" id="leave_status" type="checkbox" > 
                                          <div data-v-6d7a27c0="" class="slider round" style="height: 30px !important;">
                                          </div>
                                      </label>
                                  <% }%>
                      </div>
                  </div>
                
              </div>
              <div class="input-field">
                <div class="labele" style="text-align: left;">
                    <label style="margin-bottom: 5px;color: #b6bef1;">
                           Channel
                        </label>
                        
                </div>
                <font style="vertical-align: inherit;">
                    <font style="vertical-align: inherit;color: #72767d;font-size:.825rem;line-height:20px;">It is in this channel that Green-bot will send your message </font>
                </font>
                <br>    <br>
                <div class="select-wrapper">

                    <svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M7 10l5 5 5-5z"></path>
                            <path d="M0 0h24v24H0z" fill="none"></path>
                        </svg>
                    <select name="leave_CHANNELID" tabindex="-1">
                            <% if(leavec != null) { %>
                                <option value="<%= leavec.id %>" >#<%= leavec.name %></option>
                                <option value="no">No set</option>
                                <% guild.channels.filter(c => c.type === 'text' &&c.id !== leavec.id).forEach(c => { %>
                                <option value="<%= c.id %>" >#<%= c.name %></option>
                                <% }); %>
                                <% }else{ %>
                 <option value="no">No set</option>
                 <% guild.channels.filter(c => c.type === 'text').forEach(c => { %>
                 <option value="<%= c.id %>" >#<%= c.name %></option>
                 <% }); %>
                 <% }; %>

                        </select>
                </div>

            </div>
            <div class="input-field"style="color: #c7c7c7;">
            
                                     
              
                <div class="labele" style="text-align: left;">
                    <label style="margin-bottom: 5px;color: #b6bef1;">
                         Message
                        </label>
                        
                </div> <font style="vertical-align: inherit;">
                    <font style="vertical-align: inherit;color: #72767d;font-size:.825rem;line-height:20px;">It's that message what Green-bot is going to send </font>
                </font><br><br><code>{user}</code> : Mention the user
                <br> <code>{tag}</code> : The tag of the user ( ex : Pauldb09#0001)
                <br> <code>{username}</code> : The username of the user
                <br> <code>{server}</code> : The name of the server
                <br> <code>{membercount}</code> : The server membercount
                <br> <br>
                <textarea rows="4" name="leave_MESSAGE" maxlength="2048"class="textare"  style="color: #c7c7c7;" id="bot_description-full" class="materialize-textarea"><%= leavemsg %></textarea>
                </div>

               
                <br>
                <div>
                    <div class="_3mcH5">
                        <div class="_1g4U_">
                            <div class="YOVBk">
                                <font style="vertical-align: inherit;">
                                    <font style="color:#D2D3CA;vertical-align: inherit;">
                                   Image
                                    </font>
                                </font>
                            </div>
                            <div>
                                <div class="_2hHzh">
    
                                </div>
                            </div>
                        </div>
                        <div class="_3_S5z">
                            <font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;color: #72767d;font-size:.825rem;line-height:20px;">If this option is enabled, the bot will send an image with your message </font>
                            </font>
                            <% if(leaveimage){  %>
                                <label data-v-6d7a27c0="" for="wel_image" class="switch">
                                        <input data-v-6d7a27c0="" name="wel_image" id="wel_image" type="checkbox" checked> 
                                        <div data-v-6d7a27c0="" class="slider round" style="height: 30px !important;">
                                        </div>
                                    </label>
                                <% }else{%>
                                    <label data-v-6d7a27c0="" for="wel_image" class="switch">
                                            <input data-v-6d7a27c0="" name="wel_image" id="wel_image" type="checkbox" > 
                                            <div data-v-6d7a27c0="" class="slider round" style="height: 30px !important;">
                                            </div>
                                        </label>
                                    <% }%>
                        </div>
                    </div>
                  
                </div>  

                <% if(leaveimage){  %>
                    <canvas height="330" width="800" id="ranks">
                        <img id="source"
           src="<%=pp%>"
           width="350" height="227">
    
                    </canvas>
                    <div class="input-field">

                        <div class="input-field">
                            <div class="labele" style="text-align: left;">
                                <label style="margin-bottom: 5px;color: #b6bef1;">
                     Background
                        </label>
                            </div>
    
                            <input style="width: 500px !important;background-color: #2f3136 !important;" type="color" value="<%=color %>" name="color">
                        </div>
                    </div>
                    <script>
                        const canvas = document.getElementById('ranks');
                        const n= canvas.getContext('2d');
        
                        n.beginPath(), n.fillStyle = "<%=color %>", n.lineWidth = 1.5, n.moveTo(220, 110), n.lineTo(690, 110), n.quadraticCurveTo(730, 110, 730, 140), n.quadraticCurveTo(730, 170, 690, 170), n.lineTo(220, 170), n.lineTo(220, 110), n.fill(), n.stroke(), n.closePath(), n.font = '40px "Zen Dots"', n.fillStyle = "#fff", n.fillText(`Goodbye`, 290, 155), n.beginPath(), n.fillStyle = "<%=color %>", n.lineWidth = 1.5, n.moveTo(230, 175), n.lineTo(690, 175), n.quadraticCurveTo(730, 175, 730, 205), n.quadraticCurveTo(730, 235, 690, 235), n.lineTo(230, 235), n.lineTo(230, 175), n.fill(), n.stroke(), n.closePath(), n.font = '25px "Zen Dots"', n.fillStyle = "#fff", n.fillText(`<%= user.username %>`, 290, 215), n.beginPath(), n.fillStyle = "<%=color %>", n.lineWidth = 1.5, n.moveTo(220, 240), n.lineTo(690, 240), n.quadraticCurveTo(730, 240, 730, 270), n.quadraticCurveTo(730, 300, 690, 300), n.lineTo(220, 300), n.lineTo(220, 240), n.fill(), n.stroke(), n.closePath(), n.font = '25px "Zen Dots"', n.fillStyle = "#fff", n.fillText("We are now <%= guild.memberCount %>", 290, 280), n.beginPath(), n.fillStyle = "#fff", n.arc(160, 200, 125, 0, 2 * Math.PI, !0), n.fill(), n.beginPath(), n.arc(160, 200, 120, 0, 2 * Math.PI, !0), n.closePath(), n.clip();
                        const m = document.getElementById('source');
            n.drawImage(m, 40, 80, 240, 240);
           
                    </script><br>  <br>  <br> 
                    <% } %>
                    <br> 

                    </form>
                                    <button type="submit" class="btn" id="form_BUTTON"  onclick="send();">✅ Save changes </button>

                </div>
                </span>
        </div>
        </div>
        <div style="display: none;" class="active-bot-here" id="783708073390112830"></div>
        <script type="text/javascript">
            function send() {

                document.getElementById('formgen').submit();

            }
        </script>
        <footer>

            <script src="/dash/jquery-3.3.1.min.js" type="text/javascript"></script>
            <script src="/dash/jquery.ba-throttle-debounce.min.js" type="text/javascript"></script>
            <script src="/dash/materialize.min.js" type="text/javascript"></script>
            <script src="/dash/notyf.min.js" type="text/javascript"></script>
            <link rel="stylesheet" href="/dash/notyf.min.css">
            <script>
                $(document).ready(() => {
                    $('select').formSelect();

                    const sortSelect = $('#sortSelect');
                    const orderSelect = $('#orderSelect');

                    if (!sortSelect || !orderSelect) return;

                    const selects = [sortSelect, orderSelect];

                    selects.forEach(s => {
                        s.change(() => {
                            window.location = s.find('option:selected').val();
                        });
                    });
                });
            </script>
        </footer>

    </body>

</html>